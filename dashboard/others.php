<?php	include('../lib.php');	$data['table'] 	= makeSafe($_REQUEST['table']);	$mode 			= makeSafe($_REQUEST['mode']);	if($mode == 'fields')	{		$options  = '<option value="">Select Field</option>';		$result  = fieldslistByNumber($data['table'], 'number');		foreach($result as $key=>$field)			$options.= '<option value="'.$field.'">'.$field.'</option>';		echo json_encode($options);	}	elseif($mode == 'double')	{		$options  = '<option value="">Select Field</option>';		$options2 = '<option value="">Select Field</option>';		$result   = fieldslistByDate($data['table']);		foreach($result as $key=>$field)			$options.= '<option value="'.$field.'">'.$field.'</option>';		$result2  = fieldslistByNumber($data['table']);		foreach($result2 as $key=>$field)			$options2.= '<option value="'.$field.'">'.$field.'</option>';		$data['options']  = $options;		$data['options2'] = $options2;		echo json_encode($data);	}		function fieldslistByNumber($table)	{		$query = "SHOW COLUMNS FROM ".$table;		$result = sql($query, $eo);		if(db_num_rows($result) > 0)		{			while($row = db_fetch_row($result))			{				$data[] = $row[0];						}		}					return $data;	}	function fieldslistByDate($table)	{		$query = "SHOW COLUMNS FROM ".$table." WHERE TYPE IN ('datetime', 'date', 'timestamp')";		$result = sql($query, $eo);		if(db_num_rows($result) > 0)		{			while($row = db_fetch_row($result))			{				$data[] = $row[0];						}		}					return $data;	}?>